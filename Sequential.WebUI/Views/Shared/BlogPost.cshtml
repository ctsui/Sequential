@model List<BlogPostVModel>

@if (Model.Count() == 0)
{
   <p>No more posts.</p>
}
@foreach (BlogPostVModel post in Model)
{
   <div id="post-@(post.BlogPostId)">
      <h2>
         @Html.ActionLink(post.Title, "GetSinglePost", "post",
                          new {
                             id = Html.Encode(post.BlogPostId),
                             title = Html.Encode(post.Permalink)
                          }, null)
      </h2>
      @* WLW2011 generates inline styled HTML that is stored in Sequential DB so use raw. *@
      @Html.Raw(post.Description)
      @if (post.HasExtendedDescription())
      {
         <p class="readMoreLink">
         @Html.ActionLink("> read more", "GetSinglePost", "post",
               new {
                  id = Html.Encode(post.BlogPostId),
                  title = Html.Encode(post.Permalink)
               },
               new { @class = "readMoreLink" })
         </p>
      }
   </div>
   TimeZoneInfo estZ = TimeZoneInfo.FindSystemTimeZoneById("Eastern Standard Time");
   DateTime estTime = TimeZoneInfo.ConvertTime(post.CreateDate, TimeZoneInfo.Utc, estZ);
   <p class="datetime">
      @String.Format("{0:dddd, MMMM d, yyyy - h:mm tt} ({1})", estTime,
                     estZ.IsDaylightSavingTime(estTime) ? estZ.DaylightName : estZ.StandardName)
   </p>
   <hr />
}
